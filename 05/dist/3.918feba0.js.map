{"version":3,"sources":["webpack:///./src/pages/Result.css","webpack:///./src/pages/Result.js"],"names":["Result","props","setState","state","data","err","url","location","search","console","log","s","URLSearchParams","p1","get","p2","history","push","axios","all","status","response","message","setTimeout","res","arr","forEach","item","obj","name","pos","login","avatar_url","scores","public_repos","following","followers","s1","s2","result","error","length","loading","box","main_box","map","icon_box","tobattle","Component"],"mappings":"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","file":"3.918feba0.js","sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"loading\":\"_1WNOeHAqSQUMUmNldfgFL_\",\"box\":\"_2rqa50Rss8OzhZYpg8g9ts\",\"main_box\":\"_3p_XcgnhIhB4-GonbxOVJV\",\"scores\":\"yvpsxm3RKHD61ND0gXwGv\",\"name\":\"_3uBbbpqMNob68e0fjUvkX\",\"icon_box\":\"_3eq0iuLaPMLiSQmu210gy\",\"tobattle\":\"_17y-tQkrkAmZ1Q0aYCyrHl\",\"error\":\"_1Ti-_wQFMSsoADen10E25D\"};","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { NavLink } from \"react-router-dom\";\nimport result from \"./Result.css\";\n\nclass Result extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      err:''\n    };\n  }\n\n  async componentDidMount() {\n    const url = this.props.location.search;\n    console.log(\"url\",url);\n    const s = new URLSearchParams(url);\n    const p1 = s.get('player1');\n    const p2 = s.get('player2');\n    if(p1 === null || p2 === null){\n      this.props.history.push('/battle');\n    }\n    const res = await axios.all([\n      axios.get(`https://api.github.com/users/${p1}`),\n      axios.get(`https://api.github.com/users/${p2}`)\n    ])\n    .catch(err=>{\n      const {status} = err.response;\n      const {message} = err.response.data;\n      if(status===404){\n        this.setState({err:message},()=>{\n          setTimeout(() => {\n            this.props.history.push('/battle');\n          }, 1000);\n        })\n      }else if(status===403){\n        this.setState({err:message});\n      }\n    });\n    const arr = [];\n    res.forEach(item => {\n      const obj = {\n        name: item.data.name,\n        pos: item.data.location,\n        login: item.data.login,\n        url: item.data.avatar_url,\n        scores: item.data.public_repos,\n        following: item.data.following,\n        followers: item.data.followers\n      };\n      arr.push(obj);\n    });\n    const s1 = arr[0];\n    const s2 = arr[1];\n    if (s1.scores > s2.scores) {\n      s1.result = \"Winner\";\n      s2.result = \"Loser\";\n    } else if (s1.scores === s2.scores) {\n      s1.result = \"Draw\";\n      s2.result = \"Draw\";\n    } else {\n      s1.result = \"Loser\";\n      s2.result = \"Winner\";\n    }\n    this.setState({ data: arr });\n  }\n\n  componentWillUnmount = () => {\n    this.setState = () => {};\n  };\n\n  render() {\n    const { data,err } = this.state;\n    if(err !== \"\"){\n      return (<p className={result.error}>\n        数据请求失败，请刷新重试！<br/><br/>{err}\n      </p>)\n    }\n    if (data.length === 0) {\n      return (\n        <div className={result.loading}>\n          <h4>\n            <i className=\"fa fa-spinner fa-spin\" /> Loading ...\n          </h4>\n        </div>\n      );\n    }\n    return (\n      <div className={result.box}>\n        <ul className={result.main_box}>\n          {data.map(item => (\n            <li key={item.login}>\n              <h2>{item.result}</h2>\n              <img src={item.url} alt=\"\" />\n              <h4 className={result.scores}>Scores:{item.scores}</h4>\n              <h4 className={result.name}>\n                {item.name == null ? item.login : item.name}\n              </h4>\n              <p className={result.icon_box}>\n                <i className=\"fa fa-location-arrow\"> {item.pos}</i>\n              </p>\n              <p className={result.icon_box}>\n                <i className=\"fa fa-group\"> {item.followers}</i>\n              </p>\n              <p className={result.icon_box}>\n                <i className=\"fa fa-user-plus\"> {item.following}</i>\n              </p>\n              <p className={result.icon_box}>\n                <i className=\"fa fa-code\"> {item.scores}</i>\n              </p>\n            </li>\n          ))}\n        </ul>\n        <NavLink to=\"/battle\" className={result.tobattle}>\n          <button type=\"button\">Reset</button>\n        </NavLink>\n      </div>\n    );\n  }\n}\n\nexport default Result;\n"],"sourceRoot":""}