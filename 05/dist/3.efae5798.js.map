{"version":3,"sources":["webpack:///./src/pages/Result.css","webpack:///./src/pages/Result.js"],"names":["Result","props","setState","state","data","err","url","location","search","console","log","s","URLSearchParams","p1","get","p2","history","push","axios","all","response","message","res","arr","forEach","item","obj","name","pos","login","avatar_url","scores","public_repos","following","followers","s1","s2","result","setTimeout","color","length","loading","box","main_box","map","icon_box","tobattle","Component"],"mappings":"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","file":"3.efae5798.js","sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"loading\":\"_1WNOeHAqSQUMUmNldfgFL_\",\"box\":\"_2rqa50Rss8OzhZYpg8g9ts\",\"main_box\":\"_3p_XcgnhIhB4-GonbxOVJV\",\"scores\":\"yvpsxm3RKHD61ND0gXwGv\",\"name\":\"_3uBbbpqMNob68e0fjUvkX\",\"icon_box\":\"_3eq0iuLaPMLiSQmu210gy\",\"tobattle\":\"_17y-tQkrkAmZ1Q0aYCyrHl\"};","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { NavLink } from \"react-router-dom\";\nimport result from \"./Result.css\";\n\nclass Result extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      err:''\n    };\n  }\n\n  async componentDidMount() {\n    const url = this.props.location.search;\n    console.log(\"url\",url);\n    const s = new URLSearchParams(url);\n    const p1 = s.get('player1');\n    const p2 = s.get('player2');\n    if(p1 === null || p2 === null){\n      this.props.history.push('/battle');\n    }\n    const res = await axios.all([\n      axios.get(`https://api.github.com/users/${p1}`),\n      axios.get(`https://api.github.com/users/${p2}`)\n    ])\n    .catch(err=>{\n      this.setState({err:err.response.data.message});\n    });\n    const arr = [];\n    res.forEach(item => {\n      const obj = {\n        name: item.data.name,\n        pos: item.data.location,\n        login: item.data.login,\n        url: item.data.avatar_url,\n        scores: item.data.public_repos,\n        following: item.data.following,\n        followers: item.data.followers\n      };\n      arr.push(obj);\n    });\n    const s1 = arr[0];\n    const s2 = arr[1];\n    if (s1.scores > s2.scores) {\n      s1.result = \"Winner\";\n      s2.result = \"Loser\";\n    } else if (s1.scores === s2.scores) {\n      s1.result = \"Draw\";\n      s2.result = \"Draw\";\n    } else {\n      s1.result = \"Loser\";\n      s2.result = \"Winner\";\n    }\n    setTimeout(() => {\n      this.setState({ data: arr });\n    }, 1000);\n  }\n\n  componentWillUnmount = () => {\n    this.setState = () => {};\n  };\n\n  render() {\n    const { data,err } = this.state;\n    if(err !== \"\"){\n      return (<p style={{color:'red'}}>\n        数据请求失败，请刷新重试！<br/><br/>{err}\n      </p>)\n    }\n    if (data.length === 0) {\n      return (\n        <div className={result.loading}>\n          <h4>\n            <i className=\"fa fa-spinner fa-spin\" /> Loading ...\n          </h4>\n        </div>\n      );\n    }\n    return (\n      <div className={result.box}>\n        <ul className={result.main_box}>\n          {data.map(item => (\n            <li key={item.login}>\n              <h2>{item.result}</h2>\n              <img src={item.url} alt=\"\" />\n              <h4 className={result.scores}>Scores:{item.scores}</h4>\n              <h4 className={result.name}>\n                {item.name == null ? item.login : item.name}\n              </h4>\n              <p className={result.icon_box}>\n                <i className=\"fa fa-location-arrow\"> {item.pos}</i>\n              </p>\n              <p className={result.icon_box}>\n                <i className=\"fa fa-group\"> {item.followers}</i>\n              </p>\n              <p className={result.icon_box}>\n                <i className=\"fa fa-user-plus\"> {item.following}</i>\n              </p>\n              <p className={result.icon_box}>\n                <i className=\"fa fa-code\"> {item.scores}</i>\n              </p>\n            </li>\n          ))}\n        </ul>\n        <NavLink to=\"/battle\" className={result.tobattle}>\n          <button type=\"button\">Reset</button>\n        </NavLink>\n      </div>\n    );\n  }\n}\n\nexport default Result;\n"],"sourceRoot":""}